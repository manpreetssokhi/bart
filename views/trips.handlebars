<div class="container">
    <div>
        <h1>Plan Trip</h1>
        <form method="get">
            <h3>Origin and Destination</h3>
            <div class="input-group">
                <select class="form-control" name="source">
                    <option>Choose a station</option>
                    {{#each stations}}
                    <option value={{ this.abbr }}>{{ this.name }}</option>
                    {{/each}}
                </select>
                <select class="form-control" name="destination" onchange='this.form.submit()'>
                    <option>Choose a station</option>
                    {{#each stations}}
                    <option value={{ this.abbr }}>{{ this.name }}</option>
                    {{/each}}
                </select>
                <div class="pt-5">
                    {{#if tripResponse}}
                    <table style="width:100%">
                        <tr>
                            <th>Origin</th>
                            <th>Destination</th>
                            <th>Origin Depart Time</th>
                            <th>Origin Depart Date</th>
                            <th>Dest Arrival Time</th>
                            <th>Dest Arrival Date</th>
                            <th>Clipper</th>
                            <th>Trip time</th>
                            <th>Cost</th>
                            <th>Line and Train Head Station</th>
                        </tr>
                        <tr>
                            {{#each tripResponse}}
                            {{#.}}
                        <tr>
                            <td><span><small>{{ this.[@origin] }}</small></span></td>
                            <td><span><small>{{ this.[@destination] }}</small></span></td>
                            <td><span><small>{{ this.[@origTimeMin] }}</small></span></td>
                            <td><span><small>{{ this.[@origTimeDate] }}</small></span></td>
                            <td><span><small>{{ this.[@destTimeMin] }}</small></span></td>
                            <td><span><small>{{ this.[@destTimeDate] }}</small></span></td>
                            <td><span><small>{{ this.[@clipper] }}</small></span></td>
                            <td><span><small>{{ this.[@tripTime] }}</small></span></td>
                            <td><span><small>{{ this.[@fare] }}</small></span></td>
                            {{#leg}}
                            <td>
                                <span><small>{{ this.[@line] }}</small></span>
                                <span><small>{{ this.[@trainHeadStation] }}</small></span>
                            </td>
                            {{/leg}}
                        </tr>
                        {{/.}}
                        {{/each}}
                        </tr>
                    </table>
                    {{/if}}
                </div>
            </div>
        </form>
    </div>

    <h1>Trip Map</h1>
    <div id="map"></div>

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDHIDcJL-JorUkfhTOzE3oALc07rs3ffEs&callback=initMap&libraries=&v=weekly"
        async></script>
    <script>
        function initMap() {
            var options = {
                zoom: 8,
                center: {
                    lat: 37.3414466,
                    lng: -121.9699987
                }
            }
            var map = new.google.maps.Map(document.getElementById("map"), options);
        }
    </script>
</div>